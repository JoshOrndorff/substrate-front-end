"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _static = _interopRequireDefault(require("@polkadot/api-metadata/extrinsics/static"));

var _testingPairs = _interopRequireDefault(require("@polkadot/keyring/testingPairs"));

var _Method = _interopRequireDefault(require("../../Method"));

var _Extrinsic = _interopRequireDefault(require("./Extrinsic"));

// Copyright 2017-2019 @polkadot/types authors & contributors
// This software may be modified and distributed under the terms
// of the Apache-2.0 license. See the LICENSE file for details.
const keyring = (0, _testingPairs.default)({
  type: 'ed25519'
}, false);
describe('ExtrinsicV2', () => {
  beforeEach(() => {
    _Method.default.injectMethods(_static.default);
  });
  it('constructs a sane Uint8Array (default)', () => {
    expect(new _Extrinsic.default().toU8a()).toEqual(new Uint8Array([0, 0]));
  });
  it('creates a unsigned extrinsic', () => {
    expect(new _Extrinsic.default(_static.default.balances.transfer(keyring.bob.publicKey, 6969)).toHex()).toEqual('0x' + '0500' + // balance.transfer
    'ff' + 'd7568e5f0a7eda67a82691ff379ac4bba4f9c9b859fe779b5d46363b61ad2db9' + 'e56c');
  });
  it('creates a signed extrinsic', () => {
    expect(new _Extrinsic.default(_static.default.balances.transfer(keyring.bob.publicKey, 6969)).sign(keyring.alice, {
      blockHash: '0xec7afaf1cca720ce88c1d1b689d81f0583cc15a97d621cf046dd9abf605ef22f',
      nonce: 1,
      tip: 2
    }).toHex()).toEqual('0x' + 'ff' + 'd172a74cda4c865912c32ba0a80a57ae69abae410e5ccb59dee84e2f4432db4f' + '975c79b3c7c57898153faa55a97744f71aa8b4c44ec319978c1206f7941db65e' + '6cea25fe0bc700f8cb3c5eeef3894b21ed88398e8d8ab93b6af2e9d2fd9f5404' + '000408' + // era. nonce, tip
    '0500' + 'ff' + 'd7568e5f0a7eda67a82691ff379ac4bba4f9c9b859fe779b5d46363b61ad2db9' + 'e56c');
  });
});