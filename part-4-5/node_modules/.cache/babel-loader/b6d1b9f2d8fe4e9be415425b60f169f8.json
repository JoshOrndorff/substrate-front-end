{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ModuleMetadata = void 0;\n\nvar _Option = _interopRequireDefault(require(\"../../codec/Option\"));\n\nvar _Struct = _interopRequireDefault(require(\"../../codec/Struct\"));\n\nvar _Vector = _interopRequireDefault(require(\"../../codec/Vector\"));\n\nvar _Text = _interopRequireDefault(require(\"../../primitive/Text\"));\n\nvar _util = require(\"../util\");\n\nvar _Calls = require(\"./Calls\");\n\nvar _Events = require(\"./Events\");\n\nvar _Storage = require(\"./Storage\"); // Copyright 2017-2019 @polkadot/types authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\n\n/**\n * @name ModuleMetadata\n * @description\n * The definition of a module in the system\n */\n\n\nclass ModuleMetadata extends _Struct.default {\n  constructor(value) {\n    super({\n      name: _Text.default,\n      prefix: _Text.default,\n      storage: _Option.default.with(_Vector.default.with(_Storage.StorageFunctionMetadata)),\n      calls: _Option.default.with(_Vector.default.with(_Calls.FunctionMetadata)),\n      events: _Option.default.with(_Vector.default.with(_Events.EventMetadata))\n    }, value);\n  }\n  /**\n   * @description the module calls\n   */\n\n\n  get calls() {\n    return this.get('calls');\n  }\n  /**\n   * @description the module events\n   */\n\n\n  get events() {\n    return this.get('events');\n  }\n  /**\n   * @description the module name\n   */\n\n\n  get name() {\n    return this.get('name');\n  }\n  /**\n   * @description the module prefix\n   */\n\n\n  get prefix() {\n    return this.get('prefix');\n  }\n  /**\n   * @description the associated module storage\n   */\n\n\n  get storage() {\n    return this.get('storage');\n  }\n\n}\n/**\n * @name MetadataV1\n * @description\n * The runtime metadata as a decoded structure\n */\n\n\nexports.ModuleMetadata = ModuleMetadata;\n\nclass MetadataV1 extends _Struct.default {\n  constructor(value) {\n    super({\n      modules: _Vector.default.with(ModuleMetadata)\n    }, value);\n  }\n  /**\n   * @description The associated modules for this structure\n   */\n\n\n  get modules() {\n    return this.get('modules');\n  }\n\n  get callNames() {\n    return this.modules.map(mod => mod.calls.isNone ? [] : mod.calls.unwrap().map(fn => fn.args.map(arg => arg.type.toString())));\n  }\n\n  get eventNames() {\n    return this.modules.map(mod => mod.events.isNone ? [] : mod.events.unwrap().map(event => event.args.map(arg => arg.toString())));\n  }\n\n  get storageNames() {\n    return this.modules.map(mod => mod.storage.isNone ? [] : mod.storage.unwrap().map(fn => fn.type.isMap ? [fn.type.asMap.key.toString(), fn.type.asMap.value.toString()] : [fn.type.asType.toString()]));\n  }\n  /**\n   * @description Helper to retrieve a list of all type that are found, sorted and de-deuplicated\n   */\n\n\n  getUniqTypes(throwError) {\n    const types = (0, _util.flattenUniq)([this.callNames, this.eventNames, this.storageNames]);\n    (0, _util.validateTypes)(types, throwError);\n    return types;\n  }\n\n}\n\nexports.default = MetadataV1;","map":null,"metadata":{},"sourceType":"script"}