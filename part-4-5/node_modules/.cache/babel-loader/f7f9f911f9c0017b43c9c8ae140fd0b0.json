{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _util = require(\"@polkadot/util\");\n\nvar _MagicNumber = require(\"./MagicNumber\");\n\nvar _MetadataVersioned = _interopRequireDefault(require(\"./MetadataVersioned\")); // Copyright 2017-2019 @polkadot/types authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\n\n/**\n * @name Metadata\n * @description\n * The versioned runtime metadata as a decoded structure\n */\n\n\nclass Metadata extends _MetadataVersioned.default {\n  constructor(value) {\n    super(Metadata.decodeMetadata(value));\n  } // first we try and parse using the versioned structure, if this does fail,\n  // we adjust with the magic number and a manual version and re-try. As soon as\n  // we remove support for V0, we will just do a new here\n\n\n  static decodeMetadata() {\n    let _value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Uint8Array();\n\n    const value = (0, _util.isHex)(_value) ? (0, _util.hexToU8a)(_value) : _value;\n\n    try {\n      return new _MetadataVersioned.default(value);\n    } catch (error) {\n      if (error.message.indexOf('MagicNumber mismatch') === -1) {\n        throw error;\n      }\n    }\n\n    return new _MetadataVersioned.default((0, _util.u8aConcat)(_MagicNumber.MAGIC_NUMBER.toU8a(), // manually add the magic number\n    Uint8Array.from([0]), // add the version for the original\n    value // the actual data as retrieved\n    ));\n  }\n\n}\n\nexports.default = Metadata;","map":null,"metadata":{},"sourceType":"script"}