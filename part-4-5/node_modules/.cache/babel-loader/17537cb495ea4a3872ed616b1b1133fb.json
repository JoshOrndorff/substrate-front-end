{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/home/thib/github/substrate-developer-hub/basic-dapp/part-4-5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _util = require(\"@polkadot/util\");\n\nvar _Compact = _interopRequireDefault(require(\"./Compact\"));\n\nvar _utils = require(\"./utils\");\n\nvar _AbstractArray = _interopRequireDefault(require(\"./AbstractArray\")); // Copyright 2017-2019 @polkadot/types authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\n\n\nconst MAX_LENGTH = 32768;\n/**\n * @name Vector\n * @description\n * This manages codec arrays. Internally it keeps track of the length (as decoded) and allows\n * construction with the passed `Type` in the constructor. It is an extension to Array, providing\n * specific encoding/decoding on top of the base type.\n */\n\nclass Vector extends _AbstractArray.default {\n  constructor(Type) {\n    let value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    super(...Vector.decodeVector(Type, value));\n    this._Type = void 0;\n    this._Type = Type;\n  }\n\n  static decodeVector(Type, value) {\n    if (Array.isArray(value)) {\n      return value.map((entry, index) => {\n        try {\n          return entry instanceof Type ? entry : new Type(entry);\n        } catch (error) {\n          console.error(\"Unable to decode Vector on index \".concat(index), error.message);\n          throw error;\n        }\n      });\n    }\n\n    const u8a = (0, _util.u8aToU8a)(value);\n\n    const _Compact$default$deco = _Compact.default.decodeU8a(u8a),\n          _Compact$default$deco2 = _slicedToArray(_Compact$default$deco, 2),\n          offset = _Compact$default$deco2[0],\n          length = _Compact$default$deco2[1];\n\n    (0, _util.assert)(length.lten(MAX_LENGTH), \"Vector length \".concat(length.toString(), \" exceeds \").concat(MAX_LENGTH));\n    return (0, _utils.decodeU8a)(u8a.subarray(offset), new Array(length.toNumber()).fill(Type));\n  }\n\n  static with(Type) {\n    var _class, _temp;\n\n    return _temp = _class = class extends Vector {\n      constructor(value) {\n        super(Type, value);\n      }\n\n    }, _class.Fallback = Type.Fallback ? Vector.with(Type.Fallback) : undefined, _temp;\n  }\n  /**\n   * @description The type for the items\n   */\n\n\n  get Type() {\n    return this._Type.name;\n  }\n  /**\n   * @description Finds the index of the value in the array\n   */\n\n\n  indexOf(_other) {\n    // convert type first, this removes overhead from the eq\n    const other = _other instanceof this._Type ? _other : new this._Type(_other);\n\n    for (let i = 0; i < this.length; i++) {\n      if (other.eq(this[i])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n  /**\n   * @description Returns the base runtime type name for this instance\n   */\n\n\n  toRawType() {\n    return \"Vec<\".concat(new this._Type().toRawType(), \">\");\n  }\n\n}\n\nexports.default = Vector;","map":null,"metadata":{},"sourceType":"script"}