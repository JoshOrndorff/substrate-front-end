{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _assert = _interopRequireDefault(require(\"../assert\"));\n\nvar _undefined = _interopRequireDefault(require(\"../is/undefined\"));\n\nvar _formatDecimal = _interopRequireDefault(require(\"./formatDecimal\"));\n\nvar _si = require(\"./si\"); // Copyright 2017-2019 @polkadot/util authors & contributors\n// This software may be modified and distributed under the terms\n// of the Apache-2.0 license. See the LICENSE file for details.\n\n\nconst DEFAULT_DECIMALS = 0;\nconst DEFAULT_UNIT = _si.SI[_si.SI_MID].text;\nlet defaultDecimals = DEFAULT_DECIMALS;\nlet defaultUnit = DEFAULT_UNIT; // Formats a string/number with <prefix>.<postfix><type> notation\n\nfunction _formatBalance(input) {\n  let withSi = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  let decimals = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultDecimals;\n  let text = (input || '').toString();\n\n  if (text.length === 0 || text === '0') {\n    return '0';\n  } // strip the negative sign so we can work with clean groupings, re-add this in the\n  // end when we return the result (from here on we work with positive numbers)\n\n\n  const isNegative = text[0] === '-';\n\n  if (isNegative) {\n    text = text.substr(1);\n  }\n\n  (0, _assert.default)(/^\\d+$/.test(text), \"Non-integer input value '\".concat(text, \"' supplied to balanceFormat\")); // NOTE We start at midpoint (8) minus 1 - this means that values display as\n  // 123.456 instead of 0.123k (so always 6 relevant). Additionally we us ceil\n  // so there are at most 3 decimal before the decimal seperator\n\n  const si = (0, _si.calcSi)(text, decimals);\n  const mid = text.length - (decimals + si.power);\n  const prefix = text.substr(0, mid);\n  const postfix = \"\".concat(text.substr(mid), \"000\").substr(0, 3);\n  const units = withSi ? si.value === '-' ? \" \".concat(si.text) : \"\".concat(si.value, \" \").concat(_si.SI[_si.SI_MID].text) : '';\n  return \"\".concat(isNegative ? '-' : '').concat((0, _formatDecimal.default)(prefix || '0'), \".\").concat(postfix).concat(units);\n}\n\nconst formatBalance = _formatBalance;\n\nformatBalance.calcSi = function (text) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultDecimals;\n  return (0, _si.calcSi)(text, decimals);\n};\n\nformatBalance.findSi = _si.findSi;\n\nformatBalance.getDefaults = () => {\n  return {\n    decimals: defaultDecimals,\n    unit: defaultUnit\n  };\n}; // get allowable options to display in a dropdown\n\n\nformatBalance.getOptions = function () {\n  let decimals = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultDecimals;\n  return _si.SI.filter(_ref => {\n    let power = _ref.power;\n    return power < 0 ? decimals + power >= 0 : true;\n  });\n}; // Sets the default decimals to use for formatting (ui-wide)\n\n\nformatBalance.setDefaults = _ref2 => {\n  let decimals = _ref2.decimals,\n      unit = _ref2.unit;\n  defaultDecimals = (0, _undefined.default)(decimals) ? defaultDecimals : decimals;\n  defaultUnit = (0, _undefined.default)(unit) ? defaultUnit : unit;\n  _si.SI[_si.SI_MID].text = defaultUnit;\n};\n\nvar _default = formatBalance;\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}