{"ast":null,"code":"var _jsxFileName = \"/home/thib/github/substrate-developer-hub/basic-dapp/part-4-5/src/TxButton.js\";\nimport React from 'react';\nimport { Button } from 'semantic-ui-react';\nimport { web3FromSource } from '@polkadot/extension-dapp';\nexport default function TxButton({\n  api,\n  fromPair,\n  label,\n  params,\n  setStatus,\n  tx\n}) {\n  const makeCall = async () => {\n    const address = fromPair.address,\n          _fromPair$meta = fromPair.meta,\n          source = _fromPair$meta.source,\n          isInjected = _fromPair$meta.isInjected;\n    let fromParam; //set the signer\n\n    if (isInjected) {\n      const injected = await web3FromSource(source);\n      fromParam = address;\n      api.setSigner(injected.signer);\n    } else {\n      fromParam = fromPair;\n    }\n\n    setStatus('Sending...');\n    tx(...params).signAndSend(fromParam, ({\n      status\n    }) => {\n      if (status.isFinalized) {\n        setStatus(\"Completed at block hash #\".concat(status.asFinalized.toString()));\n      } else {\n        setStatus(\"Current transfer status: \".concat(status.type));\n      }\n    }).catch(e => {\n      setStatus(':( transaction failed');\n      console.error('ERROR:', e);\n    });\n  };\n\n  return React.createElement(Button, {\n    onClick: makeCall,\n    primary: true,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, label);\n}","map":{"version":3,"sources":["/home/thib/github/substrate-developer-hub/basic-dapp/part-4-5/src/TxButton.js"],"names":["React","Button","web3FromSource","TxButton","api","fromPair","label","params","setStatus","tx","makeCall","address","meta","source","isInjected","fromParam","injected","setSigner","signer","signAndSend","status","isFinalized","asFinalized","toString","type","catch","e","console","error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,cAAT,QAA+B,0BAA/B;AAEA,eAAe,SAASC,QAAT,CAAmB;AAAEC,EAAAA,GAAF;AAAOC,EAAAA,QAAP;AAAiBC,EAAAA,KAAjB;AAAwBC,EAAAA,MAAxB;AAAgCC,EAAAA,SAAhC;AAA2CC,EAAAA;AAA3C,CAAnB,EAAoE;AACjF,QAAMC,QAAQ,GAAG,YAAY;AAAA,UACnBC,OADmB,GACuBN,QADvB,CACnBM,OADmB;AAAA,2BACuBN,QADvB,CACVO,IADU;AAAA,UACFC,MADE,kBACFA,MADE;AAAA,UACMC,UADN,kBACMA,UADN;AAE3B,QAAIC,SAAJ,CAF2B,CAI3B;;AACA,QAAID,UAAJ,EAAgB;AACd,YAAME,QAAQ,GAAG,MAAMd,cAAc,CAACW,MAAD,CAArC;AACAE,MAAAA,SAAS,GAAGJ,OAAZ;AACAP,MAAAA,GAAG,CAACa,SAAJ,CAAcD,QAAQ,CAACE,MAAvB;AACD,KAJD,MAIO;AACLH,MAAAA,SAAS,GAAGV,QAAZ;AACD;;AACDG,IAAAA,SAAS,CAAC,YAAD,CAAT;AAEAC,IAAAA,EAAE,CAAC,GAAGF,MAAJ,CAAF,CAAcY,WAAd,CAA0BJ,SAA1B,EAAqC,CAAC;AAAEK,MAAAA;AAAF,KAAD,KAAgB;AACnD,UAAIA,MAAM,CAACC,WAAX,EAAwB;AACtBb,QAAAA,SAAS,oCAA6BY,MAAM,CAACE,WAAP,CAAmBC,QAAnB,EAA7B,EAAT;AACD,OAFD,MAEO;AACLf,QAAAA,SAAS,oCAA6BY,MAAM,CAACI,IAApC,EAAT;AACD;AACF,KAND,EAMGC,KANH,CAMUC,CAAD,IAAO;AACdlB,MAAAA,SAAS,CAAC,uBAAD,CAAT;AACAmB,MAAAA,OAAO,CAACC,KAAR,CAAc,QAAd,EAAwBF,CAAxB;AACD,KATD;AAUD,GAxBD;;AA0BA,SACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAEhB,QADX;AAEE,IAAA,OAAO,MAFT;AAGE,IAAA,IAAI,EAAC,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKGJ,KALH,CADF;AASD","sourcesContent":["import React from 'react';\nimport { Button } from 'semantic-ui-react';\nimport { web3FromSource } from '@polkadot/extension-dapp';\n\nexport default function TxButton ({ api, fromPair, label, params, setStatus, tx }) {\n  const makeCall = async () => {\n    const { address, meta: { source, isInjected } } = fromPair;\n    let fromParam;\n\n    //set the signer\n    if (isInjected) {\n      const injected = await web3FromSource(source);\n      fromParam = address;\n      api.setSigner(injected.signer);\n    } else {\n      fromParam = fromPair;\n    }\n    setStatus('Sending...');\n\n    tx(...params).signAndSend(fromParam, ({ status }) => {\n      if (status.isFinalized) {\n        setStatus(`Completed at block hash #${status.asFinalized.toString()}`);\n      } else {\n        setStatus(`Current transfer status: ${status.type}`);\n      }\n    }).catch((e) => {\n      setStatus(':( transaction failed');\n      console.error('ERROR:', e);\n    });\n  };\n\n  return (\n    <Button\n      onClick={makeCall}\n      primary\n      type='submit'\n    >\n      {label}\n    </Button>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}